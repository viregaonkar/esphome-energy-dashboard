# LVGL UI Layout

lvgl:
  log_level: INFO
  color_depth: 16
  
  displays:
    - tft_display
  
  touchscreens:
    - tft_touch
  
  # Loading Overlay (Top Layer)
  top_layer:
    widgets:
      - obj:
          id: loading_overlay
          width: 480
          height: 480
          bg_color: 0x0a0a0a
          border_width: 0
          radius: 0
          widgets:
            # Energy Icon
            - label:
                align: CENTER
                y: -80
                text: "\U000F0A72"
                text_font: icons_32
                text_color: 0xFFBB33
            
            # App Name
            - label:
                align: CENTER
                y: -30
                text: "Energie Dashboard"
                text_font: roboto_16
                text_color: 0xFFFFFF
            
            # Status Text
            - label:
                id: loading_status
                align: CENTER
                y: 20
                text: "Verbinde..."
                text_font: roboto_14
                text_color: 0x888888
            
            # Spinner
            - spinner:
                id: loading_spinner
                align: CENTER
                y: 60
                width: 40
                height: 40
                spin_time: 1.5s
                arc_length: 90deg
                arc_width: 4
                arc_color: 0x333333
                indicator:
                  arc_color: 0x00BBFF
                  arc_width: 4
            
            # Progress Bar
            - bar:
                id: loading_bar
                align: CENTER
                y: 120
                width: 280
                height: 8
                value: 0
                min_value: 0
                max_value: 100
                bg_color: 0x222222
                border_width: 0
                radius: 4
                indicator:
                  bg_color: 0x00FF99
                  radius: 4
  
  # Widgets
  pages:
    - id: main_page
      bg_color: 0x1a1a1a
      widgets:
        # === Info Box (Unten Links) ===
        - obj:
            x: 10
            y: 310
            width: 160
            height: 140
            bg_color: 0x222222
            radius: 8
            border_width: 1
            border_color: 0x444444
            scrollbar_mode: "off"
            widgets:
              # Title
              - label:
                  align: TOP_MID
                  y: 5
                  text: "Aktuelle Leistung"
                  text_font: roboto_14
                  text_color: 0xFFFFFF

              # Haus Verbrauch
              - label:
                  x: 5
                  y: 30
                  text: "Verbrauch:"
                  text_font: roboto_14
                  text_color: 0xAAAAAA
              - label:
                  id: lbl_home_consumption
                  align: TOP_RIGHT
                  x: -5
                  y: 30
                  text: "-- W"
                  text_font: roboto_14
                  text_color: 0xFFFFFF

              # Netz Leistung
              - label:
                  x: 5
                  y: 55
                  text: "Netzbezug:"
                  text_font: roboto_14
                  text_color: 0xAAAAAA
              - label:
                  id: lbl_grid_power
                  align: TOP_RIGHT
                  x: -5
                  y: 55
                  text: "-- W"
                  text_font: roboto_14
                  text_color: 0xFFFFFF

              # PV Überschuss
              - label:
                  x: 5
                  y: 80
                  text: "Ueberschuss:"
                  text_font: roboto_14
                  text_color: 0xAAAAAA
              - label:
                  id: lbl_pv_surplus
                  align: TOP_RIGHT
                  x: -5
                  y: 80
                  text: "-- W"
                  text_font: roboto_14
                  text_color: 0xFFFFFF

              # Heizstab
              - label:
                  x: 5
                  y: 105
                  text: "Heizstab:"
                  text_font: roboto_14
                  text_color: 0xAAAAAA
              - label:
                  id: lbl_heating_rod
                  align: TOP_RIGHT
                  x: -5
                  y: 105
                  text: "-- W"
                  text_font: roboto_14
                  text_color: 0xFFFFFF

        # === Energiefluss Linien (eckig/rechtwinklig) ===
        
        # PV -> Home (vertikal runter, dann horizontal rechts ins Haus)
        - line:
            points:
              - 260, 120
              - 260, 222
            line_color: 0x332211
            line_width: 3
            line_rounded: false
        
        - line:
            points:
              - 260, 220
              - 360, 220
            line_color: 0x332211
            line_width: 3
            line_rounded: false
        
        # Netz -> Home (horizontal)
        - line:
            points:
              - 130, 240
              - 350, 240
            line_color: 0x223344
            line_width: 3
            line_rounded: false
        
        # Batterie -> Home (vertikal hoch, dann horizontal rechts ins Haus)
        - line:
            points:
              - 260, 360
              - 260, 259
            line_color: 0x004422
            line_width: 3
            line_rounded: false
        
        - line:
            points:
              - 260, 260
              - 360, 260
            line_color: 0x004422
            line_width: 3
            line_rounded: false
        
        # Grid -> Batterie (horizontal rechts, dann vertikal runter)
        - line:
            points:
              - 120, 260
              - 222, 260
            line_color: 0x444444
            line_width: 3
            line_rounded: false
        
        - line:
            points:
              - 220, 260
              - 220, 360
            line_color: 0x444444
            line_width: 3
            line_rounded: false
        
        # Grid -> PV (horizontal rechts, dann vertikal hoch)
        - line:
            points:
              - 120, 220
              - 222, 220
            line_color: 0x332244
            line_width: 3
            line_rounded: false
        
        - line:
            points:
              - 220, 220
              - 220, 120
            line_color: 0x332244
            line_width: 3
            line_rounded: false
        
        # PV -> Batterie (vertikal mittig)
        - line:
            points:
              - 240, 130
              - 240, 350
            line_color: 0x332233
            line_width: 3
            line_rounded: false
        
        # Gas -> Home (vertikal nach unten)
        - line:
            points:
              - 400, 130
              - 400, 190
            line_color: 0x332211
            line_width: 3
            line_rounded: false
        
        # Wasser -> Home (vertikal nach oben)
        - line:
            points:
              - 400, 350
              - 400, 290
            line_color: 0x223344
            line_width: 3
            line_rounded: false
        
        # Home -> Heizstab (diagonal)
        - line:
            points:
              - 365, 205
              - 348, 188
            line_color: 0x552200
            line_width: 3
            line_rounded: false

        # === Animierte Energiefluss Segmente ===
        - obj:
            id: flow_pv
            x: 238
            y: 130
            width: 4
            height: 15
            bg_color: 0xFFBB33
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_grid
            x: 130
            y: 238
            width: 15
            height: 4
            bg_color: 0x00BBFF
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_battery
            x: 238
            y: 330
            width: 4
            height: 15
            bg_color: 0x00FF99
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_home
            x: 350
            y: 238
            width: 15
            height: 4
            bg_color: 0x00FF99
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_gas
            x: 438
            y: 170
            width: 4
            height: 15
            bg_color: 0xFF6666
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_water
            x: 438
            y: 290
            width: 4
            height: 15
            bg_color: 0x00DDFF
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_grid_battery
            x: 130
            y: 258
            width: 15
            height: 4
            bg_color: 0xFFFFFF
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_pv_grid
            x: 130
            y: 218
            width: 15
            height: 4
            bg_color: 0xBB33FF
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_pv_battery
            x: 238
            y: 130
            width: 4
            height: 15
            bg_color: 0xFF3399
            radius: 2
            border_width: 0
        
        - obj:
            id: flow_home_heating
            x: 400
            y: 190
            width: 8
            height: 8
            bg_color: 0xFF5722
            radius: 4
            border_width: 0

        # === UHRZEIT & DATUM (Links Oben) ===
        - obj:
            id: datetime_box
            x: 30
            y: 30
            width: 120
            height: 100
            bg_color: 0x0a0a0a
            border_width: 0
            radius: 0
            widgets:
              - label:
                  id: time_label
                  align: CENTER
                  y: -10
                  text: "00:00"
                  text_font: roboto_24
                  text_color: 0xFFFFFF
              - label:
                  id: date_label
                  align: CENTER
                  y: 20
                  text: "Mo. 01.01."
                  text_font: roboto_14
                  text_color: 0x888888

        # === PV (Oben Mitte) ===
        - obj:
            id: pv_circle
            x: 190
            y: 30
            width: 100
            height: 100
            bg_color: 0x0a0a0a
            border_color: 0xFFBB33
            border_width: 3
            radius: 50
            scrollbar_mode: "off"
            clickable: false
            widgets:
              - label:
                  align: CENTER
                  y: -15
                  text: "\U000F0A72"
                  text_font: icons_32
                  text_color: 0xFFBB33
              
              - label:
                  id: pv_value
                  align: CENTER
                  y: 10
                  text: "0.12"
                  text_font: roboto_16
                  text_color: 0xFFFFFF
              
              - label:
                  align: CENTER
                  y: 28
                  text: "kWh"
                  text_font: roboto_12
                  text_color: 0x888888
        
        # === NETZ (Links) ===
        - obj:
            id: grid_circle
            x: 30
            y: 190
            width: 100
            height: 100
            bg_color: 0x0a0a0a
            border_color: 0x00BBFF
            border_width: 3
            radius: 50
            scrollbar_mode: "off"
            clickable: false
            widgets:
              - label:
                  align: CENTER
                  y: -15
                  text: "\U000F0D3E"
                  text_font: icons_32
                  text_color: 0x00BBFF
              
              # Bezug mit Pfeil rechts
              - label:
                  align: CENTER
                  y: 10
                  x: -28
                  text: "\U000F0054"
                  text_font: icons_16
                  text_color: 0x00BBFF
              
              - label:
                  id: grid_bezug_label
                  align: CENTER
                  y: 10
                  x: 5
                  text: "0.00"
                  text_font: roboto_12
                  text_color: 0x00BBFF
                  text_align: RIGHT
              
              # Einspeisung mit Pfeil links
              - label:
                  align: CENTER
                  y: 25
                  x: -28
                  text: "\U000F004D"
                  text_font: icons_16
                  text_color: 0xBB33FF
              
              - label:
                  id: grid_einspeisung_label
                  align: CENTER
                  y: 25
                  x: 5
                  text: "0.00"
                  text_font: roboto_12
                  text_color: 0xBB33FF
                  text_align: RIGHT
        
        # === HEIZSTAB (Oben Rechts) ===
        - obj:
            id: heating_rod_circle
            x: 280
            y: 120
            width: 80
            height: 80
            bg_color: 0x0a0a0a
            border_color: 0xFF5722
            border_width: 3
            radius: 40
            scrollbar_mode: "off"
            clickable: false
            widgets:
              - label:
                  align: CENTER
                  y: -8
                  text: "\U000F0F92"
                  text_font: icons_32
                  text_color: 0xFF5722
              
              - label:
                  id: heating_rod_value
                  align: CENTER
                  y: 15
                  text: "0.00"
                  text_font: roboto_14
                  text_color: 0xFFFFFF
              
              - label:
                  align: CENTER
                  y: 30
                  text: "kWh"
                  text_font: roboto_12
                  text_color: 0x888888

        # === HOME (Rechts Mitte) ===
        - obj:
            id: home_circle
            x: 350
            y: 190
            width: 100
            height: 100
            bg_color: 0x0a0a0a
            border_color: 0x00FF99
            border_width: 3
            radius: 50
            scrollbar_mode: "off"
            clickable: false
            widgets:
              - arc:
                  id: home_arc_pv
                  align: CENTER
                  width: 94
                  height: 94
                  start_angle: 0
                  end_angle: 0
                  rotation: 270
                  value: 100
                  min_value: 0
                  max_value: 100
                  arc_width: 3
                  arc_color: 0x0a0a0a
                  arc_opa: 0
                  arc_rounded: false
                  indicator:
                    arc_color: 0xFFBB33
                    arc_width: 3
                    arc_rounded: false
              
              - arc:
                  id: home_arc_battery
                  align: CENTER
                  width: 94
                  height: 94
                  start_angle: 0
                  end_angle: 0
                  rotation: 270
                  value: 100
                  min_value: 0
                  max_value: 100
                  arc_width: 3
                  arc_color: 0x0a0a0a
                  arc_opa: 0
                  arc_rounded: false
                  indicator:
                    arc_color: 0xFF3399
                    arc_width: 3
                    arc_rounded: false

              - arc:
                  id: home_arc_grid
                  align: CENTER
                  width: 94
                  height: 94
                  start_angle: 0
                  end_angle: 0
                  rotation: 270
                  value: 100
                  min_value: 0
                  max_value: 100
                  arc_width: 3
                  arc_color: 0x0a0a0a
                  arc_opa: 0
                  arc_rounded: false
                  indicator:
                    arc_color: 0x00BBFF
                    arc_width: 3
                    arc_rounded: false

              - label:
                  align: CENTER
                  y: -15
                  text: "\U000F02DC"
                  text_font: icons_32
                  text_color: 0x00FF99
              
              - label:
                  id: home_value
                  align: CENTER
                  y: 10
                  text: "7.62"
                  text_font: roboto_16
                  text_color: 0xFFFFFF
              
              - label:
                  align: CENTER
                  y: 28
                  text: "kWh"
                  text_font: roboto_12
                  text_color: 0x888888
        
        # === BATTERIE (Unten Mitte) ===
        - obj:
            id: battery_circle
            x: 190
            y: 350
            width: 100
            height: 100
            bg_color: 0x0a0a0a
            border_width: 0
            radius: 50
            scrollbar_mode: "off"
            clickable: false
            widgets:
              # Fortschrittskreis für Batterie-Ladezustand
              - arc:
                  id: battery_arc
                  align: CENTER
                  width: 100
                  height: 100
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 0
                  min_value: 0
                  max_value: 100
                  arc_width: 6
                  arc_color: 0x1a1a1a
                  arc_rounded: true
                  indicator:
                    arc_color: 0xFF3399
                    arc_width: 6
                    arc_rounded: true
              
              # Prozent-Label (oben)
              - label:
                  id: battery_soc_label
                  align: CENTER
                  y: -30
                  text: "0%"
                  text_font: roboto_14
                  text_color: 0xFFFFFF
              
              # Batterie Icon (Mitte)
              - label:
                  align: CENTER
                  y: 0
                  text: "\U000F12A3"
                  text_font: icons_32
                  text_color: 0xFF3399
              
              # Ladung mit Pfeil runter
              - label:
                  align: CENTER
                  y: 23
                  x: -25
                  text: "\U000F0045"
                  text_font: icons_16
                  text_color: 0xFF3399
              
              - label:
                  id: battery_charge_label
                  align: CENTER
                  y: 23
                  x: 8
                  text: "0.00"
                  text_font: roboto_12
                  text_color: 0xFF3399
              
              # Entladung mit Pfeil hoch
              - label:
                  align: CENTER
                  y: 38
                  x: -25
                  text: "\U000F005D"
                  text_font: icons_16
                  text_color: 0x00FF99
              
              - label:
                  id: battery_discharge_label
                  align: CENTER
                  y: 38
                  x: 8
                  text: "0.00"
                  text_font: roboto_12
                  text_color: 0x00FF99
        
        # === GAS (Rechts Oben) ===
        - obj:
            id: gas_circle
            x: 350
            y: 30
            width: 100
            height: 100
            bg_color: 0x0a0a0a
            border_color: 0xFF6666
            border_width: 3
            radius: 50
            scrollbar_mode: "off"
            clickable: false
            widgets:
              - label:
                  align: CENTER
                  y: -15
                  text: "\U000F0238"
                  text_font: icons_32
                  text_color: 0xFF6666
              
              - label:
                  id: gas_value
                  align: CENTER
                  y: 10
                  text: "1.42"
                  text_font: roboto_16
                  text_color: 0xFFFFFF
              
              - label:
                  align: CENTER
                  y: 28
                  text: "m3"
                  text_font: roboto_12
                  text_color: 0x888888
        
        # === WASSER (Rechts Unten) ===
        - obj:
            id: water_circle
            x: 350
            y: 350
            width: 100
            height: 100
            bg_color: 0x0a0a0a
            border_color: 0x00DDFF
            border_width: 3
            radius: 50
            scrollbar_mode: "off"
            clickable: false
            widgets:
              - label:
                  align: CENTER
                  y: -15
                  text: "\U000F058C"
                  text_font: icons_32
                  text_color: 0x00DDFF
              
              - label:
                  id: water_value
                  align: CENTER
                  y: 10
                  text: "0.11"
                  text_font: roboto_16
                  text_color: 0xFFFFFF
              
              - label:
                  align: CENTER
                  y: 28
                  text: "m3"
                  text_font: roboto_12
                  text_color: 0x888888
